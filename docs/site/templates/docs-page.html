{% extends "base.html" %}
{% macro render_docs_nav(section_path, current_permalink, nested=false) %}
    {% set docs_nav_section = get_section(path=section_path) %}
    {% if nested %}<h3 class="docs-nav-heading">{{ docs_nav_section.title }}</h3>{% endif %}
    {% if docs_nav_section.pages | length > 0 %}
        {% if nested %}
            <ul class="docs-nav-list docs-nav-list--nested">
            {% else %}
                <ul class="docs-nav-list">
                {% endif %}
                {% for docs_page in docs_nav_section.pages %}
                    <li>
                        <a class="docs-nav-link {% if docs_page.permalink == current_permalink %}is-active{% endif %}"
                           href="{{ docs_page.permalink }}">{{ docs_page.title }}</a>
                    </li>
                {% endfor %}
            </ul>
        {% endif %}
        {% for subsection_path in docs_nav_section.subsections %}
            {{ self::render_docs_nav(section_path=subsection_path, current_permalink=current_permalink, nested=true) }}
        {% endfor %}
    {% endmacro render_docs_nav %}
    {% block title %}
        {{ page.title }} | {{ config.title }} Docs
    {% endblock title %}
    {% block canonical %}
        {{ page.permalink }}
    {% endblock canonical %}
    {% block page_width_class %}
        site-container-wide
    {% endblock page_width_class %}
    {% block main_width_class %}
        site-container-wide
    {% endblock main_width_class %}
    {% block main_extra_classes %}
        docs-layout
    {% endblock main_extra_classes %}
    {% block extra_scripts %}
        <script>
(function () {
  /** Attach a copy button to every fenced code block in `.docs-content`. */
  function attachCodeCopyButtons() {
    document.querySelectorAll('.docs-content pre').forEach(function (pre) {
      var btn = document.createElement('button');
      btn.className = 'docs-copy-btn';
      btn.textContent = 'copy';
      btn.title = 'Copy to clipboard';
      btn.setAttribute('aria-label', 'Copy code');

      btn.addEventListener('click', function () {
        var code = pre.querySelector('code');
        var text = code ? code.innerText : pre.innerText;
        navigator.clipboard.writeText(text).then(function () {
          btn.textContent = 'copied!';
          setTimeout(function () { btn.textContent = 'copy'; }, 2000);
        });
      });

      pre.appendChild(btn);
    });
  }

  attachCodeCopyButtons();
})();
        </script>
    {% endblock extra_scripts %}
    {% block content %}
        <aside class="docs-sidebar">
            {{ self::render_docs_nav(section_path="docs/_index.md", current_permalink=page.permalink) }}
        </aside>
        <article class="docs-content-wrapper">
            <h1 class="docs-page-title">{{ page.title }}</h1>
            <div class="docs-content">{{ page.content | safe }}</div>
        </article>
    {% endblock content %}
